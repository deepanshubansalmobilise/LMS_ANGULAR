{"ast":null,"code":"import { UserCoursesService } from '../../utils/service/user-courses.service';\nimport { CoursesService } from '../../utils/service/courses.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../utils/service/user-courses.service\";\nimport * as i2 from \"../../utils/service/courses.service\";\nimport * as i3 from \"@angular/common\";\nfunction CoursesComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14)(1, \"div\", 15);\n    i0.ɵɵelement(2, \"img\", 16);\n    i0.ɵɵelementStart(3, \"div\", 17)(4, \"div\", 18)(5, \"p\", 19);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"h5\", 20);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\", 21)(10, \"p\", 22);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"p\", 22);\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"p\", 22);\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"div\")(17, \"div\", 23);\n    i0.ɵɵelement(18, \"div\", 24);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(19, \"div\", 25)(20, \"div\", 26)(21, \"div\")(22, \"p\", 27);\n    i0.ɵɵtext(23, \"Completed:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"span\", 28);\n    i0.ɵɵtext(25);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(26, \"div\")(27, \"p\", 29);\n    i0.ɵɵtext(28, \"Time:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"span\", 30);\n    i0.ɵɵtext(30, \"Unknown\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(31, \"a\", 31);\n    i0.ɵɵtext(32, \"Resume\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(33, \"div\")(34, \"a\", 32);\n    i0.ɵɵtext(35, \"Start\");\n    i0.ɵɵelementEnd()()()()()();\n  }\n  if (rf & 2) {\n    const course_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", course_r1.imageSrc, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(course_r1.topic);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(course_r1.title);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", course_r1.chapters, \" Chapters\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", course_r1 == null ? null : course_r1.quizzes, \" Quizzes\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", course_r1.assignments, \" Assignments\");\n    i0.ɵɵadvance(10);\n    i0.ɵɵtextInterpolate1(\"\", course_r1.progress, \" %\");\n  }\n}\nexport let CoursesComponent = /*#__PURE__*/(() => {\n  class CoursesComponent {\n    constructor(UserCourseService, CourseService) {\n      this.UserCourseService = UserCourseService;\n      this.CourseService = CourseService;\n      this.newCoursesInfo = [];\n    }\n    ngOnInit() {\n      // let getInfo = async () =>{\n      //   await this.getCourses();\n      //   await this.getuserCourses();\n      //   // await this.getuserCoursesInfo();\n      //   console.log(this.courses, 'courses access')\n      // }\n      // getInfo();\n      this.getCourses();\n    }\n    getuserCourses() {\n      this.UserCourseService.getCourses().subscribe(courses => {\n        this.userCourses = courses;\n        console.log(this.userCourses, 'userCpourses access');\n        this.getuserCoursesInfo();\n        // courses data is stored in this....\n      });\n    }\n\n    getCourses() {\n      this.CourseService.getCourses().subscribe(courses => {\n        this.courses = courses;\n        this.getuserCourses();\n        // courses data is stored in this....\n        console.log(this.courses, \"1courses access\");\n      });\n    }\n    updateCourse(course) {\n      this.UserCourseService.updateCourse(course).subscribe(updatedCourse => {});\n    }\n    calculateProgress(course) {\n      let totalTopics = 0;\n      let completedTopics = 0;\n      course.chapters.forEach(chapter => {\n        chapter.topics.forEach(topic => {\n          console.log(topic, \"topic\");\n          totalTopics++;\n          if (topic.completed) {\n            completedTopics++;\n          }\n        });\n      });\n      console.log(completedTopics, \"totalTopics\", course, totalTopics);\n      return totalTopics === 0 ? 0 : completedTopics / totalTopics * 100;\n    }\n    getuserCoursesInfo() {\n      this.courses.forEach(course => {\n        let courseId = course.id.toString();\n        let purchased = false;\n        let progress = 0;\n        // Check if the course is purchased\n        this.userCourses.forEach(userCourse => {\n          if (userCourse.coursesInfo[courseId]) {\n            purchased = true;\n            progress = this.calculateProgress(course);\n          }\n        });\n        // Add course information to newCoursesInfo array\n        this.newCoursesInfo.push({\n          title: course.title,\n          id: course.id,\n          imageSrc: course.imageSrc,\n          progress: progress,\n          totalChapters: course.totalChapters,\n          totalTopics: course.chapters.reduce((total, chapter) => total + chapter.topics.length, 0),\n          totalAssignments: course.totalAssignments,\n          purchased: purchased\n        });\n      });\n      console.log(this.newCoursesInfo, \"newCourseInfo access\");\n    }\n    static #_ = this.ɵfac = function CoursesComponent_Factory(t) {\n      return new (t || CoursesComponent)(i0.ɵɵdirectiveInject(i1.UserCoursesService), i0.ɵɵdirectiveInject(i2.CoursesService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: CoursesComponent,\n      selectors: [[\"app-courses\"]],\n      decls: 17,\n      vars: 2,\n      consts: [[1, \"container\"], [1, \"mb-3\"], [1, \"mb-3\", \"d-flex\", \"align-items-center\"], [1, \"mb-0\", \"me-3\"], [1, \"mb-0\", \"badge\"], [1, \"d-flex\", \"align-items-center\", \"w-100\", \"mb-4\"], [1, \"me-auto\", \"navbar-form\"], [\"name\", \"search_form\"], [1, \"d-flex\", \"form-group\"], [\"type\", \"text\", \"placeholder\", \"Enter keyword\", 1, \"form-control\"], [\"type\", \"submit\", 1, \"btn\", \"btn-search\"], [1, \"fa\", \"fa-search\"], [1, \"row\"], [\"class\", \"col-xl-3 mb-3\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-xl-3\", \"mb-3\"], [1, \"card\", \"h-100\"], [\"alt\", \"Unable to load image\", 1, \"card-img-top\", \"img\", 3, \"src\"], [1, \"card-body\", \"d-flex\", \"flex-column\", \"h-100\"], [1, \"flex-1\"], [1, \"topic\"], [1, \"mb-3\", \"title\"], [1, \"mb-2\", \"d-flex\", \"align-items-center\"], [1, \"mb-0\", \"course_content\"], [1, \"progress\", \"progress-bar\"], [1, \"progress-bar\", \"rounded-pill\"], [1, \"d-flex\", \"align-items-center\", \"w-100\", \"mt-3\"], [1, \"me-auto\", \"d-flex\", \"align-items-center\"], [1, \"me-1\", \"mb-0\", \"completed\"], [1, \"mb-0\", \"percent\"], [1, \"me-1\", \"mb-0\"], [1, \"mb-0\"], [\"href\", \"#\", 1, \"btn\", \"btn-secondary\"], [\"href\", \"#\", 1, \"btn\", \"btn-primary\"]],\n      template: function CoursesComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"h1\", 3);\n          i0.ɵɵtext(4, \"Courses\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"p\", 4);\n          i0.ɵɵtext(6);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(7, \"div\", 5)(8, \"div\", 6)(9, \"form\", 7)(10, \"div\", 8);\n          i0.ɵɵelement(11, \"input\", 9);\n          i0.ɵɵelementStart(12, \"button\", 10);\n          i0.ɵɵelement(13, \"i\", 11);\n          i0.ɵɵelementEnd()()()()()();\n          i0.ɵɵelementStart(14, \"div\")(15, \"div\", 12);\n          i0.ɵɵtemplate(16, CoursesComponent_div_16_Template, 36, 7, \"div\", 13);\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(6);\n          i0.ɵɵtextInterpolate(ctx.newCoursesInfo.length);\n          i0.ɵɵadvance(10);\n          i0.ɵɵproperty(\"ngForOf\", ctx.newCoursesInfo);\n        }\n      },\n      dependencies: [i3.NgForOf],\n      styles: [\".container[_ngcontent-%COMP%]{max-width:1440px}.badge[_ngcontent-%COMP%]{background-color:#cbcdcf;border:1px solid #cbcdcf;border-radius:100px;color:#001489;font-weight:600;font-size:12px;padding:4px 8px}.form-group[_ngcontent-%COMP%]{margin:0;position:relative;background-color:#eee;border-radius:30px}.form-control[_ngcontent-%COMP%]{transition:width .3s ease;width:220px;border-radius:30px;padding:5px 15px;height:32px;border-color:#d9d9d9;display:block;padding:.4375rem .75rem;font-size:.75rem;font-weight:600;line-height:1.5;appearance:none;background:#EEE;background-clip:padding-box;border:none}.expanded[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:200px}.form-control[_ngcontent-%COMP%]:focus-visible{outline:none}.btn-search[_ngcontent-%COMP%]{position:absolute;right:0;top:0;bottom:0;border:none;background:none;border-radius:0 30px 30px 0;display:flex;align-items:center}.nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{background-color:none;border-bottom:2px solid #5534A5}.course_content[_ngcontent-%COMP%]{color:#6a6e83;font-size:10px;margin-bottom:0;margin-right:30px;position:relative}.course_content[_ngcontent-%COMP%]:before{content:\\\"\\\";display:inline-block;width:7px;height:7px;border-radius:50%;background-color:#6a6e83;position:absolute;top:50%;transform:translateY(-50%)}.course_content[_ngcontent-%COMP%]:nth-child(2):before{left:-13px}.course_content[_ngcontent-%COMP%]:nth-child(3):before{left:-13px}.course_content[_ngcontent-%COMP%]:first-child:before{display:none}.img[_ngcontent-%COMP%]{min-height:228px}.topic[_ngcontent-%COMP%]{color:#6a6e83;font-size:11px;font-weight:500}.title[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#11031b}.completed[_ngcontent-%COMP%]{color:#6a6e83;font-size:12px}.percent[_ngcontent-%COMP%]{color:#11031b;font-size:12px}\"]\n    });\n  }\n  return CoursesComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}